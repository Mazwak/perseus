# Principes de base

Perseus a deux blocs de construction fondamentaux qui constituent toute son approche de la création d’applications, et si vous les comprenez, vous pourrez créer des interfaces extrêmement complexes avec Perseus qui apparaitront comme des applications fantastiques.

1. Une application est divisée en modèles, eux-mêmes divisés en pages.
2. Une page est générée à partir d’un modèle et d’états.

Le premier repose sur l’idée cruciale du routage sur le web, où tout est découpé en pages. Cela sera assez familier à la plupart des gens : les sites Web ont des pages différentes qui affichent un contenu différent. Perseus étend cette idée avec de *modèles*, qui peuvent générer des pages.

Le second bloc fondamental nous explique comment fonctionnent les modèles : ils utilisent des états et générent les pages. **Modèle + état = page.**

Prenons un exemple pour comprendre comment cela fonctionne en pratique. Disons que vous développez une application de lecture de musique qui possède une vaste bibliothèque de chansons (nous ignorerons les listes de lecture, les artistes, etc. pour rester simple). La première étape de la conception de votre application consiste à réfléchir à sa structure. Il apparait assez rapidement que vous aurez besoin d’une page d’index pour afficher les meilleures chansons, d’une page « à propos » pour informer les gens sur la plate-forme et d’une page pour chaque chanson. L’index et la page « à propos » ont des structures différentes, mais chaque page de chanson a la même structure, juste avec un contenu différent. C’est là que les modèles entrent en jeu. Vous auriez un modèle pour la page d’index et un autre pour la page « à propos », puis vous auriez un troisième modèle pour les pages de chansons. Contrairement aux deux autres, ce modèle récupère des *états (state)*, qu’il peut utiliser pour créer de nombreuses pages différentes avec la même structure.

La façon dont nous générons et gérons cette étape est là où Perseus brille vraiment. Toutes ces chansons sont-elles répertoriées dans une base de données disponible au moment de la compilation ? Utilisez la stratégie [*build state*](:reference/strategies/build-state). Y en a-t-il trop pour tout construire en même temps ? Utilisez [*incremental generation*](:reference/strategies/incremental-generation) pour créer uniquement les chansons les plus couramment utilisées en premier, puis créez les autres à la demande lors de leur premier accès, en mettant les états en cache pour les renvoyer rapidement pour les utilisateurs suivants.

Une fois ces états créés, Perseus continuera et pré-générera vos pages proactivement, ce qui signifie que vos utilisateurs verront le contenu à la seconde où ils interrogeront votre site.

Ces idées sont intégrées au cœur de Perseus, et créer les états afin que les modèles puissent générer des pages est l’idée fondamentale derrière Perseus. Vous trouverez des concepts similaires dans des frameworks JavaScript populaires tels que NextJS et GatsbyJS. C’est la vitesse, l’ergonomie et ce qu’il fait à partir de là qui distingue Perseus. Une fois que vous avez généré des états et que toutes les pages de votre application sont prêtes, il reste encore beaucoup de boulot à effectuer sur cette application de lecture de musique. Une chanson donnée peut être en pause ou en cours de lecture, l’utilisateur peut avoir désactivé manuellement le mode sombre, la lecture automatique des chansons associées peut être activée ou désactivée. Tout cela est un état, mais ce n’est pas un état que nous pouvons gérer lorsque nous créons votre application. Traditionnellement, les frameworks vous abandonnaient pour gérer tout cela, mais Perseus essaie d’être un peu plus utile en rendant automatiquement votre état réactif. Disons que l’état d’une seule page de chanson inclut les propriétés `name`, `artist`, `album`, `year` et `paused` (il y en aurait probablement beaucoup plus en réalité !). Les quatre premieres peuvent être définis au moment de la compilation et oubliées, mais « en pause » peut être modifiée à tout moment. Pas de problème, vous pourrez le modifier une fois la page chargée. Appelez simplement `.set()` dessus et Perseus le mettra non seulement à jour localement, mais il le mettra à jour dans un magasin global à votre application afin que, si un utilisateur revient à cette chanson plus tard, elle sera préservée (ou pas, à votre convenance). Et qu’en est-il des propriétés comme `dark_mode`, un état pertinent pour l’ensemble de l’application ? Eh bien, Perseus fournit un support intégré pour un état global réactif avec lequel il est possible d’interagir à partir de n’importe quelle page.

Dès lors, si vous êtes familier avec le développement d’interface utilisateur (UI), cela peut vous sembler familier, c’est très similaire au modèle *MVC*, ou *model, view, controller*. Si vous n’en avez jamais entendu parler, il s’agit simplement d’un moyen de développer des applications dans lesquelles vous détenez tous les états dans lesquels votre application peut éventuellement se trouver dans un *modèle* et l’utilisez pour créer une *vue*. Ensuite, vous gérez l’interaction de l’utilisateur avec un *contrôleur*, qui modifie l’état, et la *vue* se met à jour en conséquence. Perseus ne vous impose pas cette structure, et en fait vous pouvez vous passer entièrement de toutes ces considérantions d’états réactifs si ce n’est pas votre tasse de thé sans problème, car Perseus n’utilise pas MVC comme un *carcan* dans lequel vous développez, il l’utilise comme une *architecture* dans laquelle votre code fonctionne. Vous pouvez utiliser des méthodes de développement de 1960 ou 2060 si vous le souhaitez, Perseus ne s’en soucie pas, cela fonctionnera simplement en arrière-plan et s’assurera que l’état de votre application *juste fonctionne*.

Perseus ajoute également sa petite touche aux idées habituelles sur l’état de l’application. Si votre application entière est représentée dans son état, alors ne serait-ce pas cool si vous pouviez *geler* cet état, l’enregistrer quelque part, puis le redémarrer plus tard pour ramener votre application exactement là où elle se trouvait auparavant. C’est intégré à Perseus, et c’est toujours incroyablement rapide. Mais si vous ne le souhaitez pas, vous pouvez le désactiver, pas de problème.

Si tout cela vous fait vibrer, continuez à lire et vous apprendrez à créer votre première application Perseus !
